<html>
    <head>
        <title>MaiaGPU Example</title>
        <meta charset="utf-8" />
        <script src="https://cdn.jsdelivr.net/npm/gpu.js@latest/dist/gpu-browser.min.js"></script>
        <script src="http://maia.maiascript.com:8015/maiastudio/js/maiascript.js"></script>
    </head>

    <body onload="maiavm.compile()">
        <script type="text/javascript">
            function kernel(a, b) {
                let sum = 0;
                for (let i = 0; i < 2; i++) {
                    sum += a[this.thread.y][i] * b[i][this.thread.x];
                }
                return sum;
            }
        </script>
        <script type="text/maiascript">
            gpu := GPU()
            multiplyMatrices = gpu.createKernel(kernel)
            multiplyMatrices.setOutput([2, 2])
            
            a = [1,2;3,4]
            b = [5,6;7,8]
            
            c = multiplyMatrices(a, b)
            
            system.showMessageDialog(c)
        </script>
    </body>
</html>